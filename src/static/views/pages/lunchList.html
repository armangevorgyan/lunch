<div ng-init="main.init()" class="tab-pane fade in active">
    <div class="space">
        <calendar start-date="fromDate" on-change="main.loadLunches()"></calendar>
    </div>
    <div class="lunches row">
        <div class="col-md-3 col-sm-6 col-xs-12 lunch" ng-repeat="(date, availability) in availabilities">
            {{date | date: 'd MMM (EEEE)'}}
            <div class="lunch-food">
                <div class="food" ng-repeat="choice in choices[date]">
                    <a href="#/choose/{{choice.foodAvailability.food.type}}/{{choice.foodAvailability.availableDate | date: 'yyyy'}}/{{choice.foodAvailability.availableDate | date: 'M'}}/{{choice.foodAvailability.availableDate | date: 'd'}}/">
                        <span class="food-image" style="background-image: url({{choice.foodAvailability.food.imageUrl}})"></span>
                        {{choice.foodAvailability.food.foodName}}
                    </a>
                </div>
            </div>
            <div ng-if="!choices[date] || choices[date].length < 1">
                <a class="btn" href="#/choose/dish/{{date | date: 'yyyy'}}/{{date | date: 'M'}}/{{date | date: 'd'}}/">Select dish</a>
                <a class="btn" href="#/choose/salad/{{date | date: 'yyyy'}}/{{date | date: 'M'}}/{{date | date: 'd'}}/">Select salad</a>
            </div>
        </div>
    </div>
</div>

